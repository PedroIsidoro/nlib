<!DOCTYPE true><!--[if lt IE 7]><html class="no-js ie6 oldie" lang="en">
<![endif]--><!--[if IE 7]><html class="no-js ie7 oldie" lang="en">
<![endif]--><!--[if IE 8]><html class="no-js ie8 oldie" lang="en">
<![endif]--><!--[if gt IE 8]><html class="no-js" lang="en">
<![endif]--><head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<title>nodeca-lib 0.0.1 API documentation</title>
<meta name="generator" content="ndoc">
<meta name="description" content="">
<meta name="author" content="">
<meta name="viewport" content="width=device-width,initial-scale=1">
<!-- CSS concatenated and minified via ant build script-->
<link rel="stylesheet" href="stylesheets/main.css">
<!-- end CSS-->
<script src="javascripts/modernizr-2.0.6.min.js"></script></head><body><nav class="sidebar"><form id="search"><input type="search" size="20" title="Search" placeholder="Search"/></form><ul id="search-results" class="menu"></ul><ul class="menu"><li><div class="menu-item"><a href="#ActionController" class="class" title="ActionController (class)" data-id="ActionController">ActionController</a></div><ul class=""><li><div class="menu-item"><a href="#ActionController.new" class="constructor" title="new ActionController (constructor)" data-id="new ActionController">new</a></div></li><li><div class="menu-item"><a href="#ActionController.prototype.permission" class="instance-method" title="ActionController#permission (instance method)" data-id="ActionController#permission">permission</a></div></li></ul></li><li><div class="menu-item"><a href="#Application" class="class" title="Application (class)" data-id="Application">Application</a></div><ul class=""><li><div class="menu-item"><a href="#Application.new" class="constructor" title="new Application (constructor)" data-id="new Application">new</a></div></li><li><div class="menu-item"><a href="#Application.addHook" class="class-method" title="Application.addHook (class method)" data-id="Application.addHook">addHook</a></div></li><li><div class="menu-item"><a href="#Application.prototype.bootstrap" class="instance-method" title="Application#bootstrap (instance method)" data-id="Application#bootstrap">bootstrap</a></div></li><li><div class="menu-item"><a href="#Application.prototype.getConfigFilename" class="instance-method" title="Application#getConfigFilename (instance method)" data-id="Application#getConfigFilename">getConfigFilename</a></div></li><li><div class="menu-item"><a href="#Application.prototype.getModel" class="instance-method" title="Application#getModel (instance method)" data-id="Application#getModel">getModel</a></div></li><li><div class="menu-item"><a href="#Application.prototype.init" class="instance-method" title="Application#init (instance method)" data-id="Application#init">init</a></div></li><li><div class="menu-item"><a href="#Application.prototype.readConfig" class="instance-method" title="Application#readConfig (instance method)" data-id="Application#readConfig">readConfig</a></div></li><li><div class="menu-item"><a href="#Application.prototype.config" class="instance-property" title="Application#config (instance property)" data-id="Application#config">config</a></div></li><li><div class="menu-item"><a href="#Application.prototype.env" class="instance-property" title="Application#env (instance property)" data-id="Application#env">env</a></div></li><li><div class="menu-item"><a href="#Application.prototype.name" class="instance-property" title="Application#name (instance property)" data-id="Application#name">name</a></div></li><li><div class="menu-item"><a href="#Application.prototype.root" class="instance-property" title="Application#root (instance property)" data-id="Application#root">root</a></div></li><li><div class="menu-item"><a href="#Application.prototype.settings" class="instance-property" title="Application#settings (instance property)" data-id="Application#settings">settings</a></div></li></ul></li><li><div class="menu-item"><a href="#HooksManager" class="class internal" title="HooksManager (class)" data-id="HooksManager">HooksManager</a></div><ul class=""><li><div class="menu-item"><a href="#HooksManager.new" class="constructor" title="new HooksManager (constructor)" data-id="new HooksManager">new</a></div></li><li><div class="menu-item"><a href="#HooksManager.prototype.add" class="instance-method chainable" title="HooksManager#add (instance method)" data-id="HooksManager#add">add</a></div></li><li><div class="menu-item"><a href="#HooksManager.prototype.exec" class="instance-method" title="HooksManager#exec (instance method)" data-id="HooksManager#exec">exec</a></div></li><li><div class="menu-item"><a href="#HooksManager.prototype.getStack" class="instance-method" title="HooksManager#getStack (instance method)" data-id="HooksManager#getStack">getStack</a></div></li></ul></li><li><div class="menu-item"><a href="#Permission" class="class" title="Permission (class)" data-id="Permission">Permission</a></div><ul class=""><li><div class="menu-item"><a href="#Permission.new" class="constructor" title="new Permission (constructor)" data-id="new Permission">new</a></div></li><li><div class="menu-item"><a href="#Permission.Test" class="class" title="Permission.Test (class)" data-id="Permission.Test">Permission.Test</a></div><ul class=""><li><div class="menu-item"><a href="#Permission.Test.new" class="constructor" title="new Permission.Test (constructor)" data-id="new Permission.Test">new</a></div></li><li><div class="menu-item"><a href="#Permission.Test.prototype.and" class="instance-method" title="Permission.Test#and (instance method)" data-id="Permission.Test#and">and</a></div></li><li><div class="menu-item"><a href="#Permission.Test.prototype.call" class="instance-method" title="Permission.Test#call (instance method)" data-id="Permission.Test#call">call</a></div></li><li><div class="menu-item"><a href="#Permission.Test.prototype.or" class="instance-method" title="Permission.Test#or (instance method)" data-id="Permission.Test#or">or</a></div></li></ul></li><li><div class="menu-item"><a href="#Permission.prototype.addTest" class="instance-method" title="Permission#addTest (instance method)" data-id="Permission#addTest">addTest</a></div></li><li><div class="menu-item"><a href="#Permission.prototype.or" class="instance-method" title="Permission#or (instance method)" data-id="Permission#or">or</a></div></li><li><div class="menu-item"><a href="#Permission.prototype.test" class="instance-method" title="Permission#test (instance method)" data-id="Permission#test">test</a></div></li><li><div class="menu-item"><a href="#Permission.prototype.filter" class="instance-property" title="Permission#filter (instance property)" data-id="Permission#filter">filter</a></div></li></ul></li><li><div class="menu-item"><a href="#PriorityStack" class="class" title="PriorityStack (class)" data-id="PriorityStack">PriorityStack</a></div><ul class=""><li><div class="menu-item"><a href="#PriorityStack.new" class="constructor" title="new PriorityStack (constructor)" data-id="new PriorityStack">new</a></div></li><li><div class="menu-item"><a href="#PriorityStack.prototype.flatten" class="instance-method" title="PriorityStack#flatten (instance method)" data-id="PriorityStack#flatten">flatten</a></div></li><li><div class="menu-item"><a href="#PriorityStack.prototype.push" class="instance-method chainable" title="PriorityStack#push (instance method)" data-id="PriorityStack#push">push</a></div></li></ul></li><li><div class="menu-item"><a href="#Settings" class="class" title="Settings (class)" data-id="Settings">Settings</a></div><ul class=""><li><div class="menu-item"><a href="#Settings.new" class="constructor" title="new Settings (constructor)" data-id="new Settings">new</a></div></li><li><div class="menu-item"><a href="#Settings.Store" class="class" title="Settings.Store (class)" data-id="Settings.Store">Settings.Store</a></div><ul class=""><li><div class="menu-item"><a href="#Settings.Store.new" class="constructor" title="new Settings.Store (constructor)" data-id="new Settings.Store">new</a></div></li><li><div class="menu-item"><a href="#Settings.Store.adopts" class="class-method" title="Settings.Store.adopts (class method)" data-id="Settings.Store.adopts">adopts</a></div></li><li><div class="menu-item"><a href="#Settings.Store.prototype.get" class="instance-method" title="Settings.Store#get (instance method)" data-id="Settings.Store#get">get</a></div></li><li><div class="menu-item"><a href="#Settings.Store.prototype.getDefaultsFor" class="instance-method" title="Settings.Store#getDefaultsFor (instance method)" data-id="Settings.Store#getDefaultsFor">getDefaultsFor</a></div></li><li><div class="menu-item"><a href="#Settings.Store.prototype.preload" class="instance-method" title="Settings.Store#preload (instance method)" data-id="Settings.Store#preload">preload</a></div></li><li><div class="menu-item"><a href="#Settings.Store.prototype.set" class="instance-method" title="Settings.Store#set (instance method)" data-id="Settings.Store#set">set</a></div></li><li><div class="menu-item"><a href="#Settings.Store.prototype.keys" class="instance-property" title="Settings.Store#keys (instance property)" data-id="Settings.Store#keys">keys</a></div></li></ul></li><li><div class="menu-item"><a href="#Settings.prototype.definition" class="instance-method" title="Settings#definition (instance method)" data-id="Settings#definition">definition</a></div></li><li><div class="menu-item"><a href="#Settings.prototype.get" class="instance-method" title="Settings#get (instance method)" data-id="Settings#get">get</a></div></li><li><div class="menu-item"><a href="#Settings.prototype.store" class="instance-method" title="Settings#store (instance method)" data-id="Settings#store">store</a></div></li></ul></li><li><div class="menu-item"><a href="#Utilities" class="class" title="Utilities (class)" data-id="Utilities">Utilities</a></div><ul class=""><li><div class="menu-item"><a href="#Utilities.readYaml" class="class-method" title="Utilities.readYaml (class method)" data-id="Utilities.readYaml">readYaml</a></div></li></ul></li></ul></nav><article class="main"><article id="home" data-title="Home" class="article"><div class="readme"><h1>nodeca-lib</h1></div></article><article id="ActionController" data-title="ActionController (class)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#ActionController" class="" title="ActionController (class)" data-id="ActionController">ActionController</a></li></ul><h2><span class="type">class</span><span class="name">ActionController</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/controller.js#L4">View source code</a></div></header><div class="section constructor"><h3>Constructor</h3><div class="content"></div><ul class="method-list"><li><a href="#ActionController.new" class="" title="new ActionController (constructor)" data-id="new ActionController">new ActionController</a></li></ul></div><div class="section instance_methods"><h3>Instance methods</h3><div class="content"><ul class="method-list"><li><a href="#ActionController.prototype.permission" class="" title="ActionController#permission (instance method)" data-id="ActionController#permission">permission</a></li></ul></div></div></article><article id="ActionController.new" data-title="new ActionController (constructor)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#ActionController" class="" title="ActionController (class)" data-id="ActionController">ActionController</a></li><li><a href="#ActionController.new" class="" title="new ActionController (constructor)" data-id="new ActionController">new</a></li></ul><h2><span class="type">constructor</span><span class="name">new ActionController</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/controller.js#L20">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">new ActionController(app)</li></ul></li></ul></div></div></article><article id="ActionController.prototype.permission" data-title="ActionController#permission (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#ActionController" class="" title="ActionController (class)" data-id="ActionController">ActionController</a></li><li><a href="#ActionController.prototype.permission" class="" title="ActionController#permission (instance method)" data-id="ActionController#permission">permission</a></li></ul><h2><span class="type">instance method</span><span class="name">ActionController#permission</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/controller.js#L49">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">ActionController#permission(name)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Application.Permission</li></ul></li></ul></li><li class="signature"><ul><li class="signature-call">ActionController#permission(name, onFail)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">ApplicationPermission</li></ul></li></ul></li></ul><p>Controller&apos;s permission accessor.</p>  <h5>See Also</h5> <ul><li>Application.Permission constructor for <code>onFail</code> description</li></ul></div></div></article><article id="Application" data-title="Application (class)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Application" class="" title="Application (class)" data-id="Application">Application</a></li></ul><h2><span class="type">class</span><span class="name">Application</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/application.js#L25">View source code</a></div></header><div class="section description"><h3>Description</h3><div class="content"><h5>Example</h5> <pre><code>// file: index.js
module.exports = new Application({
  name: &apos;my_app&apos;,
  root: __dirname,
  bootstrap: function bootstrap(callback) {
    // bootstrap application
    callback();
  }
});
// ...
Application.addHook(&apos;schemas-loaded&apos;, function (callback) {
    // monkey-patch some schemas...
    // ...
    callback(Error(&quot;Something happened&quot;));
    // ...
    callback(null);
});</code></pre></div></div><div class="section constructor"><h3>Constructor</h3><div class="content"></div><ul class="method-list"><li><a href="#Application.new" class="" title="new Application (constructor)" data-id="new Application">new Application</a></li></ul></div><div class="section class_methods"><h3>Class methods</h3><div class="content"><ul class="method-list"><li><a href="#Application.addHook" class="" title="Application.addHook (class method)" data-id="Application.addHook">addHook</a></li></ul></div></div><div class="section instance_methods"><h3>Instance methods</h3><div class="content"><ul class="method-list"><li><a href="#Application.prototype.bootstrap" class="" title="Application#bootstrap (instance method)" data-id="Application#bootstrap">bootstrap</a></li><li><a href="#Application.prototype.getConfigFilename" class="" title="Application#getConfigFilename (instance method)" data-id="Application#getConfigFilename">getConfigFilename</a></li><li><a href="#Application.prototype.getModel" class="" title="Application#getModel (instance method)" data-id="Application#getModel">getModel</a></li><li><a href="#Application.prototype.init" class="" title="Application#init (instance method)" data-id="Application#init">init</a></li><li><a href="#Application.prototype.readConfig" class="" title="Application#readConfig (instance method)" data-id="Application#readConfig">readConfig</a></li></ul></div></div><div class="section instance_properties"><h3>Instance properties</h3><div class="content"><ul class="method-list"><li><a href="#Application.prototype.config" class="" title="Application#config (instance property)" data-id="Application#config">config</a></li><li><a href="#Application.prototype.env" class="" title="Application#env (instance property)" data-id="Application#env">env</a></li><li><a href="#Application.prototype.name" class="" title="Application#name (instance property)" data-id="Application#name">name</a></li><li><a href="#Application.prototype.root" class="" title="Application#root (instance property)" data-id="Application#root">root</a></li><li><a href="#Application.prototype.settings" class="" title="Application#settings (instance property)" data-id="Application#settings">settings</a></li></ul></div></div></article><article id="Application.new" data-title="new Application (constructor)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Application" class="" title="Application (class)" data-id="Application">Application</a></li><li><a href="#Application.new" class="" title="new Application (constructor)" data-id="new Application">new</a></li></ul><h2><span class="type">constructor</span><span class="name">new Application</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/application.js#L91">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">new Application(options)</li></ul></li></ul><ul class="argument-list"><li class="argument"><ul class="argument-details"><li class="argument-name">options</li><li class="argument-types"><ul><li class="argument-type">Object</li></ul></li><li class="argument-description"><p>Application basic configuration</p></li></ul></li></ul><p>Creates new nodeca application with given <code>options.root</code> as application
root. If <code>options.bootstrapper</code> was given, it will be used upon
<a href="#Application.prototype.bootstrap" class="link-short" title="Application#bootstrap (instance method)" data-id="Application#bootstrap">Application#bootstrap</a> and it&apos;s the only place where you may add hooks.</p>  <h5>Options</h5> <ul><li><code>root</code> (required) - Application&apos;s root path (usually <code>__dirname</code>)</li><li><code>name</code> (required) - Application name must be unique (usaually same as you
provide in <code>package.json</code></li><li><code>bootstrap</code> (optional) - Application bootstrapper. </li></ul> <h5>Example</h5> <pre><code>var app = new Application({
  name: &apos;my_app&apos;,
  root: __dirname,
  bootstrap: function bootstrap(callback) {
    // bootstrap application
    callback();
  }
});

</code></pre> <h5>See Also</h5> <ul><li>Application#addHook</li></ul></div></div></article><article id="Application.addHook" data-title="Application.addHook (class method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Application" class="" title="Application (class)" data-id="Application">Application</a></li><li><a href="#Application.addHook" class="" title="Application.addHook (class method)" data-id="Application.addHook">addHook</a></li></ul><h2><span class="type">class method</span><span class="name">Application.addHook</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/application.js#L351">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Application.addHook(name[, priority = 10], handler)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Void</li></ul></li></ul></li></ul><p>Registers given <code>handler</code> as <code>name</code> hook.</p>  <h5>Available Hooks</h5> <ul><li>apps-loaded</li><li>schemas-loaded</li><li>models-loaded</li><li>views-compiled</li><li>controllers-loaded</li><li>stores-loaded</li><li>routes-loaded</li><li>assets-compiled </li></ul> <h5>Example</h5> <pre><code>Application.addHook(&apos;schemas-loaded&apos;, function (callback) {
    // monkey-patch some schemas...
    // ...
    callback(Error(&quot;Something happened&quot;));
    // ...
    callback(null);
});

</code></pre> <h5>See Also</h5> <ul><li><a href="#Application" class="link-short" title="Application (class)" data-id="Application">Application</a></li><li><a href="#HooksManager.prototype.add" class="link-short" title="HooksManager#add (instance method)" data-id="HooksManager#add">HooksManager#add</a></li></ul></div></div></article><article id="Application.prototype.bootstrap" data-title="Application#bootstrap (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Application" class="" title="Application (class)" data-id="Application">Application</a></li><li><a href="#Application.prototype.bootstrap" class="" title="Application#bootstrap (instance method)" data-id="Application#bootstrap">bootstrap</a></li></ul><h2><span class="type">instance method</span><span class="name">Application#bootstrap</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/application.js#L147">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Application#bootstrap(appConfig, callback)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Void</li></ul></li></ul></li><li class="signature"><ul><li class="signature-call">Application#bootstrap(callback)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Void</li></ul></li></ul></li></ul><p>Configures and bootstraps (if <code>options.bootstrap</code> was given
in constructor) application.</p></div></div></article><article id="Application.prototype.getConfigFilename" data-title="Application#getConfigFilename (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Application" class="" title="Application (class)" data-id="Application">Application</a></li><li><a href="#Application.prototype.getConfigFilename" class="" title="Application#getConfigFilename (instance method)" data-id="Application#getConfigFilename">getConfigFilename</a></li></ul><h2><span class="type">instance method</span><span class="name">Application#getConfigFilename</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/application.js#L227">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Application#getConfigFilename(name)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">String</li></ul></li></ul></li></ul><p>Returns full path of <code>name</code> config.</p>  <h5>Example</h5> <p>Assuming app is placed under /srv/red-hot-chili-peppers</p>  <pre><code>app.getConfigFilename(&apos;database&apos;);
// -&gt; /srv/red-hot-chili-peppers/config/database.yml</code></pre></div></div></article><article id="Application.prototype.getModel" data-title="Application#getModel (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Application" class="" title="Application (class)" data-id="Application">Application</a></li><li><a href="#Application.prototype.getModel" class="" title="Application#getModel (instance method)" data-id="Application#getModel">getModel</a></li></ul><h2><span class="type">instance method</span><span class="name">Application#getModel</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/application.js#L303">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Application#getModel(name)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Object</li></ul></li></ul></li></ul><p>Retuns model (proxy to mongoose.model right now).</p></div></div></article><article id="Application.prototype.init" data-title="Application#init (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Application" class="" title="Application (class)" data-id="Application">Application</a></li><li><a href="#Application.prototype.init" class="" title="Application#init (instance method)" data-id="Application#init">init</a></li></ul><h2><span class="type">instance method</span><span class="name">Application#init</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/application.js#L193">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Application#init(appConfig, callback)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Void</li></ul></li></ul></li></ul><p>Initializes master application.</p></div></div></article><article id="Application.prototype.readConfig" data-title="Application#readConfig (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Application" class="" title="Application (class)" data-id="Application">Application</a></li><li><a href="#Application.prototype.readConfig" class="" title="Application#readConfig (instance method)" data-id="Application#readConfig">readConfig</a></li></ul><h2><span class="type">instance method</span><span class="name">Application#readConfig</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/application.js#L274">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Application#readConfig(name, callback)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Void</li></ul></li></ul></li><li class="signature"><ul><li class="signature-call">Application#readConfig(name, env, callback)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Void</li></ul></li></ul></li></ul><ul class="argument-list"><li class="argument"><ul class="argument-details"><li class="argument-name">name</li><li class="argument-types"><ul><li class="argument-type">String</li></ul></li><li class="argument-description"><p>filename to read (without extension), e.g.: <code>application</code></p></li></ul></li><li class="argument"><ul class="argument-details"><li class="argument-name">env</li><li class="argument-types"><ul><li class="argument-type">String</li></ul></li><li class="argument-description"><p>get specific environment section of config (method does not checks if config has different sections or not)</p></li></ul></li><li class="argument"><ul class="argument-details"><li class="argument-name">callback</li><li class="argument-types"><ul><li class="argument-type">Function</li></ul></li><li class="argument-description"><p>fired once config was read or error met. Called with arguments as follows - <code>callback(err, config)</code>.</p></li></ul></li></ul><p>Reads and parses <code>config/&lt;name&gt;.yml</code> file of application. If <code>env</code> is
given result is merged <code>general</code> and <code>env</code> sections of config.</p>  <h5>Example</h5> <p>Assuming we have file <code>config/application.yml</code>:</p>  <pre><code>---
general:
  foo: bar

production:
  baz: baz
</code></pre> <p>We can grab whole config:</p>  <pre><code>app.readConfig(&apos;application&apos;, function (err, config) {
  console.log(config);
  // -&gt; {general: {foo: &apos;bar&apos;}, production: {baz: &apos;baz&apos;}}
});
</code></pre> <p>Or syntethic config for environment:</p>  <pre><code>app.readConfig(&apos;application&apos;, &apos;production&apos;, function (err, config) {
  console.log(config);
  // -&gt; {foo: &apos;bar&apos;, baz: &apos;baz&apos;}
});
</code></pre> <h5>See Also</h5> <ul><li>Application#getConfigFile</li><li><a href="#Utilities.readYaml" class="link-short" title="Utilities.readYaml (class method)" data-id="Utilities.readYaml">Utilities.readYaml</a></li></ul></div></div></article><article id="Application.prototype.config" data-title="Application#config (instance property)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Application" class="" title="Application (class)" data-id="Application">Application</a></li><li><a href="#Application.prototype.config" class="" title="Application#config (instance property)" data-id="Application#config">config</a></li></ul><h2><span class="type">instance property</span><span class="name">Application#config</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/application.js#L135">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Application#config</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Object</li></ul></li></ul></li></ul><p>Applications&apos;s config.</p>  <h5>Throws Error</h5> <ul><li>When application was not yet bootstrapped</li><li>When failed read defaults config</li></ul></div></div></article><article id="Application.prototype.env" data-title="Application#env (instance property)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Application" class="" title="Application (class)" data-id="Application">Application</a></li><li><a href="#Application.prototype.env" class="" title="Application#env (instance property)" data-id="Application#env">env</a></li></ul><h2><span class="type">instance property</span><span class="name">Application#env</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/application.js#L183">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Application#env</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">String</li></ul></li></ul></li></ul><p>Application environment retreived from <code>NODE_ENV</code> environment variable.
By default <code>development</code> if <code>NODE_ENV</code> was not set.</p></div></div></article><article id="Application.prototype.name" data-title="Application#name (instance property)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Application" class="" title="Application (class)" data-id="Application">Application</a></li><li><a href="#Application.prototype.name" class="" title="Application#name (instance property)" data-id="Application#name">name</a></li></ul><h2><span class="type">instance property</span><span class="name">Application#name</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/application.js#L119">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Application#name</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">String</li></ul></li></ul></li></ul><p>Applications&apos;s name.</p></div></div></article><article id="Application.prototype.root" data-title="Application#root (instance property)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Application" class="" title="Application (class)" data-id="Application">Application</a></li><li><a href="#Application.prototype.root" class="" title="Application#root (instance property)" data-id="Application#root">root</a></li></ul><h2><span class="type">instance property</span><span class="name">Application#root</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/application.js#L109">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Application#root</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">String</li></ul></li></ul></li></ul><p>Applications&apos;s root directory</p></div></div></article><article id="Application.prototype.settings" data-title="Application#settings (instance property)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Application" class="" title="Application (class)" data-id="Application">Application</a></li><li><a href="#Application.prototype.settings" class="" title="Application#settings (instance property)" data-id="Application#settings">settings</a></li></ul><h2><span class="type">instance property</span><span class="name">Application#settings</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/application.js#L314">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Application#settings</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Application.Settings</li></ul></li></ul></li></ul><p>Global settings managre shared between all applications.</p></div></div></article><article id="HooksManager" data-title="HooksManager (class)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#HooksManager" class="" title="HooksManager (class)" data-id="HooksManager">HooksManager</a></li></ul><h2><span class="type">class</span><span class="name">HooksManager</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/application/hooks_manager.js#L19">View source code</a></div></header><div class="section description"><h3>Description</h3><div class="content"><p>Provides application hooks registry.</p>  <h5>Example</h5> <pre><code>var hooks = new HooksManager([&apos;foo&apos;]);

hooks.add(&apos;foo&apos;, 20, function () { console.log(&apos;b&apos;); });
hooks.add(&apos;foo&apos;, 10, function () { console.log(&apos;a&apos;); });
hooks.exec(&apos;foo&apos;);
// -&gt; a
// -&gt; b

hooks.add(&apos;bar&apos;, 10, function () { console.log(&apos;sorry&apos;); });
// -&gt; throws Error</code></pre></div></div><div class="section constructor"><h3>Constructor</h3><div class="content"></div><ul class="method-list"><li><a href="#HooksManager.new" class="" title="new HooksManager (constructor)" data-id="new HooksManager">new HooksManager</a></li></ul></div><div class="section instance_methods"><h3>Instance methods</h3><div class="content"><ul class="method-list"><li><a href="#HooksManager.prototype.add" class="" title="HooksManager#add (instance method)" data-id="HooksManager#add">add</a></li><li><a href="#HooksManager.prototype.exec" class="" title="HooksManager#exec (instance method)" data-id="HooksManager#exec">exec</a></li><li><a href="#HooksManager.prototype.getStack" class="" title="HooksManager#getStack (instance method)" data-id="HooksManager#getStack">getStack</a></li></ul></div></div></article><article id="HooksManager.new" data-title="new HooksManager (constructor)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#HooksManager" class="" title="HooksManager (class)" data-id="HooksManager">HooksManager</a></li><li><a href="#HooksManager.new" class="" title="new HooksManager (constructor)" data-id="new HooksManager">new</a></li></ul><h2><span class="type">constructor</span><span class="name">new HooksManager</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/application/hooks_manager.js#L40">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">new HooksManager(allowedNames[, context])</li></ul></li></ul><ul class="argument-list"><li class="argument"><ul class="argument-details"><li class="argument-name">allowedNames</li><li class="argument-types"><ul><li class="argument-type">Array</li></ul></li><li class="argument-description"><p>List of allowed hooks</p></li></ul></li><li class="argument"><ul class="argument-details"><li class="argument-name">context</li><li class="argument-types"><ul><li class="argument-type">Object</li></ul></li><li class="argument-description"><p><code>this</code> context of hook handlers when executing them</p></li></ul></li></ul><p>Creates an instance of hooks manager, which accepts only specified <code>names</code>
of hooks to be registered and executed.</p></div></div></article><article id="HooksManager.prototype.add" data-title="HooksManager#add (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#HooksManager" class="" title="HooksManager (class)" data-id="HooksManager">HooksManager</a></li><li><a href="#HooksManager.prototype.add" class="" title="HooksManager#add (instance method)" data-id="HooksManager#add">add</a></li></ul><h2><span class="type">instance method</span><span class="name">HooksManager#add</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/application/hooks_manager.js#L124">View source code</a></div></header><div class="section method chainable"><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">HooksManager#add(name, priority, handler)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type"><a href="#HooksManager" class="link-short" title="HooksManager (class)" data-id="HooksManager">HooksManager</a></li></ul></li></ul></li></ul><ul class="argument-list"><li class="argument"><ul class="argument-details"><li class="argument-name">name</li><li class="argument-types"><ul><li class="argument-type">String</li></ul></li><li class="argument-description"><p>Name of the hook</p></li></ul></li><li class="argument"><ul class="argument-details"><li class="argument-name">priority</li><li class="argument-types"><ul><li class="argument-type">Number</li></ul></li><li class="argument-description"><p>Priority of hook <code>handler</code></p></li></ul></li><li class="argument"><ul class="argument-details"><li class="argument-name">handler</li><li class="argument-types"><ul><li class="argument-type">Function</li></ul></li><li class="argument-description"><p>Will be fired during hook execution</p></li></ul></li></ul><p>Register <code>handler</code> in the stack of <code>name</code> hook.</p>  <h5>Override handler&apos;s context</h5> <p>All registered handlers are executed with <code>context</code> given by constructor,
but you may bind you own context for <code>handler</code> if you need it:</p>  <pre><code>var somePlace = new Restaurant(&quot;Good Food Ltd.&quot;),
    lunchHandler = function lunchHandler() {
      console.log(&quot;Having lunch. Don&apos;t buzzing me please...&quot;);

      this.askMenu(function chooseFood(err, menu) {
        // ...
      });
    };

hooks.add(&apos;lunch&apos;, lunchHandler.bind(somePlace));
</code></pre> <h5>See Also</h5> <ul><li><a href="#HooksManager.prototype.getStack" class="link-short" title="HooksManager#getStack (instance method)" data-id="HooksManager#getStack">HooksManager#getStack</a> </li></ul> <h5>Throws Error</h5> <ul><li>If <code>handler</code> is not a function</li></ul></div></div></article><article id="HooksManager.prototype.exec" data-title="HooksManager#exec (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#HooksManager" class="" title="HooksManager (class)" data-id="HooksManager">HooksManager</a></li><li><a href="#HooksManager.prototype.exec" class="" title="HooksManager#exec (instance method)" data-id="HooksManager#exec">exec</a></li></ul><h2><span class="type">instance method</span><span class="name">HooksManager#exec</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/application/hooks_manager.js#L206">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">HooksManager#exec(name, callback)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Promise.Joint</li></ul></li></ul></li></ul><ul class="argument-list"><li class="argument"><ul class="argument-details"><li class="argument-name">name</li><li class="argument-types"><ul><li class="argument-type">String</li></ul></li><li class="argument-description"><p>Name of the hook</p></li></ul></li><li class="argument"><ul class="argument-details"><li class="argument-name">callback</li><li class="argument-types"><ul><li class="argument-type">Function</li></ul></li><li class="argument-description"><p>Promise.Joint&apos;s <code>done</code> handler</p></li></ul></li></ul><p>Executes each handler registered in the <code>name</code> hook stack:</p>  <ul><li><p>Each handler is &quot;wrapped&quot; in promise and called with two arguments:</p> <ul><li>successCallback (Function): See Promise#resolve</li><li>failureCallback (Function): See Promise.Joint#reject</li></ul></li><li><p>Each handler will be called with context specified in constructor. You
may bind different context if you need, see <a href="#HooksManager.prototype.add" class="link-short" title="HooksManager#add (instance method)" data-id="HooksManager#add">HooksManager#add</a> for
details.</p> </li></ul> <h5>Example</h5> <pre><code>var context = {action: &apos;have a coffee&apos;},
    awaiter = function waiter(err, p1, p2) {
      if (err) { console.log(err.message); }
      if (p1 &amp;&amp; p1[0]) { console.log(p1[0]); }
      if (p2 &amp;&amp; p2[0]) { console.log(p2[0]); }
    },
    handler = function handler(resolve, reject) {
      if (!this.action) {
        reject(Error(&quot;This will mark hooks executor as &apos;rejected&apos;.&quot;));
        return;
      }

      console.log(&quot;While having &quot; + hook + &quot;...&quot;);
      console.log(&quot;Going to &quot; + this.action + &quot; with my wife.&quot;);

      // Normally you will need to &quot;resolve&quot; with `null` as first arg,
      // but you may want to &quot;mark&quot; handler&apos;s promise as error for
      // your own internal purposes, without marking whole hooks
      // stack executor as being rejected.
      resolve(Error(&quot;This error will not affect executor anyhow.&quot;));
    };

HooksManager(&apos;lunch&apos;, context)
  .add(&apos;lunch&apos;, handler)
  .exec(&apos;lunch&apos;, awaiter);
  // -&gt; While having lunch...
  // -&gt; Going to have a coffee with my wife.
  // -&gt; This error will not affect executor anyhow.

HooksManager(&apos;lunch&apos;, context)
  .add(&apos;lunch&apos;, handler, handler.bind({action: &apos;have a tea&apos;})
  .exec(&apos;lunch&apos;, awaiter);
  // -&gt; While having lunch...
  // -&gt; Going to have a coffee with my wife.
  // -&gt; While having lunch...
  // -&gt; Going to have a tea with my wife.
  // -&gt; This error will not affect executor anyhow.
  // -&gt; This error will not affect executor anyhow.

HooksManager(&apos;lunch&apos;)
  .add(&apos;lunch&apos;, handler)
  .exec(&apos;lunch&apos;, awaiter);
  // -&gt; This will mark hooks executor as &apos;rejected&apos;.

</code></pre> <h5>See Also</h5> <ul><li><a href="#HooksManager.prototype.add" class="link-short" title="HooksManager#add (instance method)" data-id="HooksManager#add">HooksManager#add</a></li><li><a href="#HooksManager.prototype.getStack" class="link-short" title="HooksManager#getStack (instance method)" data-id="HooksManager#getStack">HooksManager#getStack</a></li><li>Promise.Joint</li></ul></div></div></article><article id="HooksManager.prototype.getStack" data-title="HooksManager#getStack (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#HooksManager" class="" title="HooksManager (class)" data-id="HooksManager">HooksManager</a></li><li><a href="#HooksManager.prototype.getStack" class="" title="HooksManager#getStack (instance method)" data-id="HooksManager#getStack">getStack</a></li></ul><h2><span class="type">instance method</span><span class="name">HooksManager#getStack</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/application/hooks_manager.js#L80">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">HooksManager#getStack(name)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type"><a href="#PriorityStack" class="link-short" title="PriorityStack (class)" data-id="PriorityStack">PriorityStack</a></li></ul></li></ul></li></ul><ul class="argument-list"><li class="argument"><ul class="argument-details"><li class="argument-name">name</li><li class="argument-types"><ul><li class="argument-type">String</li></ul></li><li class="argument-description"><p>Name of the hook</p></li></ul></li></ul><p>Returns stack of handlers assigned to the <code>name</code> hook.</p>  <h5>Throws Error</h5> <ul><li>If <code>name</code> is not a valid hook name (specified in the constructor)</li></ul></div></div></article><article id="Permission" data-title="Permission (class)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Permission" class="" title="Permission (class)" data-id="Permission">Permission</a></li></ul><h2><span class="type">class</span><span class="name">Permission</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/permission.js#L9">View source code</a></div></header><div class="section description"><h3>Description</h3><div class="content"><p>Represents single permission object. Each permission object consist of</p>  <ul><li>custom test functions</li><li>tests of settings</li></ul></div></div><div class="section classes"><h3>Classes</h3><div class="content"><ul class="method-details-list"><li class="method-description"><h4><a href="#Permission.Test" class="" title="Permission.Test (class)" data-id="Permission.Test">Permission.Test</a></h4><p>Represents single group of tests, e.g.</p></li></ul></div></div><div class="section constructor"><h3>Constructor</h3><div class="content"></div><ul class="method-list"><li><a href="#Permission.new" class="" title="new Permission (constructor)" data-id="new Permission">new Permission</a></li></ul></div><div class="section instance_methods"><h3>Instance methods</h3><div class="content"><ul class="method-list"><li><a href="#Permission.prototype.addTest" class="" title="Permission#addTest (instance method)" data-id="Permission#addTest">addTest</a></li><li><a href="#Permission.prototype.or" class="" title="Permission#or (instance method)" data-id="Permission#or">or</a></li><li><a href="#Permission.prototype.test" class="" title="Permission#test (instance method)" data-id="Permission#test">test</a></li></ul></div></div><div class="section instance_properties"><h3>Instance properties</h3><div class="content"><ul class="method-list"><li><a href="#Permission.prototype.filter" class="" title="Permission#filter (instance property)" data-id="Permission#filter">filter</a></li></ul></div></div></article><article id="Permission.new" data-title="new Permission (constructor)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Permission" class="" title="Permission (class)" data-id="Permission">Permission</a></li><li><a href="#Permission.new" class="" title="new Permission (constructor)" data-id="new Permission">new</a></li></ul><h2><span class="type">constructor</span><span class="name">new Permission</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/permission.js#L203">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">new Permission(app[, onFail])</li></ul></li></ul><ul class="argument-list"><li class="argument"><ul class="argument-details"><li class="argument-name">app</li><li class="argument-types"><ul><li class="argument-type">Application</li></ul></li><li class="argument-description"><p>Instance of application</p></li></ul></li><li class="argument"><ul class="argument-details"><li class="argument-name">onFail</li><li class="argument-types"><ul><li class="argument-type">Object</li></ul></li><li class="argument-description"><p>Definition of action in case of permission denied.</p></li></ul></li></ul><h5>Handling Failures</h5> <p>Failures are handled by schema defined in <code>onFail</code>. This object may contain
following keys:</p>  <ul><li>forward (String): Forwards request to <code>controller#action</code></li><li>redirect (String): Redirects request to given URL with 302 code</li><li>handler (Function): Custom handler function with <code>req, res, next</code> args.</li><li>message (String): Message to be written into flash-messanger stack. </li></ul> <p>When permission denied, then following algorithm will be used:</p>  <ul><li>Assign <code>req.error</code> to <code>onFail.message</code></li><li>Try error handlers (first one found): <ul><li><code>onFail.handler</code> pass execution to it and stop default route</li><li><code>onFail.redirect</code> will redirect request and stop routing execution</li><li><code>onFail.forward</code> will forward request to given action</li></ul></li><li>Stop execution by call <code>next(Error(onFail.message))</code></li></ul></div></div></article><article id="Permission.Test" data-title="Permission.Test (class)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Permission" class="" title="Permission (class)" data-id="Permission">Permission</a></li><li><a href="#Permission.Test" class="" title="Permission.Test (class)" data-id="Permission.Test">Test</a></li></ul><h2><span class="type">class</span><span class="name">Permission.Test</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/permission/test.js#L48">View source code</a></div></header><div class="section description"><h3>Description</h3><div class="content"><p>Represents single group of tests, e.g.</p>  <pre><code>// a AND b AND c OR d AND e
Test(a).and(b).and(c).or(d).and(e);
</code></pre> <p>You can pass <code>Test</code> objects into tests to get &quot;groupings&quot;, e.g.:</p>  <pre><code>// a AND ( b OR c AND d ) AND e
var t = Test(b).or(c).and(d);
Test(a).and(t).and(e);

</code></pre> <h5>Test Handlers</h5> <p>Each <code>Test</code> instance consist of <em>stacks</em> of tests. Each <code>or</code> creates new
stack and calls <code>and</code>. Each <code>and</code> pushes test to the latest stack. Each
<code>test</code> handler is a simple function (or any object that responds to <code>call</code>
method) that accepts only one argument <code>callback(err, result)</code> and being
called within context of <code>env</code> object provided to the <code>call</code>.</p>  <pre><code>var a = function (cb) {
      // I want foobar to be zero
      cb(null, 0 == this.foobar);
    },
    b = {
      call: function (env, cb) {
        // I want foobar to be odd
        cb(null, env.foobar % 2);
      }
    },
    t = Test(a).or(b);
////////////////////////////////////////////
t.call({foobar: 0}, function (err, result) {
  // result === true
});
////////////////////////////////////////////
t.call({foobar: 1}, function (err, result) {
  // result === true
});
////////////////////////////////////////////
t.call({foobar: 2}, function (err, result) {
  // result === false
});</code></pre></div></div><div class="section constructor"><h3>Constructor</h3><div class="content"></div><ul class="method-list"><li><a href="#Permission.Test.new" class="" title="new Permission.Test (constructor)" data-id="new Permission.Test">new Permission.Test</a></li></ul></div><div class="section instance_methods"><h3>Instance methods</h3><div class="content"><ul class="method-list"><li><a href="#Permission.Test.prototype.and" class="" title="Permission.Test#and (instance method)" data-id="Permission.Test#and">and</a></li><li><a href="#Permission.Test.prototype.call" class="" title="Permission.Test#call (instance method)" data-id="Permission.Test#call">call</a></li><li><a href="#Permission.Test.prototype.or" class="" title="Permission.Test#or (instance method)" data-id="Permission.Test#or">or</a></li></ul></div></div></article><article id="Permission.Test.new" data-title="new Permission.Test (constructor)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Permission" class="" title="Permission (class)" data-id="Permission">Permission</a></li><li><a href="#Permission.Test" class="" title="Permission.Test (class)" data-id="Permission.Test">Test</a></li><li><a href="#Permission.Test.new" class="" title="new Permission.Test (constructor)" data-id="new Permission.Test">new</a></li></ul><h2><span class="type">constructor</span><span class="name">new Permission.Test</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/permission/test.js#L92">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">new Permission.Test([test])</li></ul></li></ul><ul class="argument-list"><li class="argument"><ul class="argument-details"><li class="argument-name">test</li><li class="argument-types"><ul><li class="argument-type">Function</li></ul></li><li class="argument-description"><p>Test handler proxied to <a href="#Permission.Test.prototype.and" class="link-short" title="Permission.Test#and (instance method)" data-id="Permission.Test#and">Permission.Test#and</a></p></li></ul></li></ul><p>Class constructor. Allows omit <code>new</code> keyword.</p></div></div></article><article id="Permission.Test.prototype.and" data-title="Permission.Test#and (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Permission" class="" title="Permission (class)" data-id="Permission">Permission</a></li><li><a href="#Permission.Test" class="" title="Permission.Test (class)" data-id="Permission.Test">Test</a></li><li><a href="#Permission.Test.prototype.and" class="" title="Permission.Test#and (instance method)" data-id="Permission.Test#and">and</a></li></ul><h2><span class="type">instance method</span><span class="name">Permission.Test#and</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/permission/test.js#L119">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Permission.Test#and(test)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type"><a href="#Permission.Test" class="link-short" title="Permission.Test (class)" data-id="Permission.Test">Test</a></li></ul></li></ul></li></ul><ul class="argument-list"><li class="argument"><ul class="argument-details"><li class="argument-name">test</li><li class="argument-types"><ul><li class="argument-type">Function</li></ul></li><li class="argument-description"><p>Test handler.</p></li></ul></li></ul><p>Adds <code>test</code> to the latest stack of tests.</p>  <h5>See Also</h5> <ul><li><em>Test Handlers</em> section of <a href="#Permission.Test" class="link-short" title="Permission.Test (class)" data-id="Permission.Test">Permission.Test</a></li></ul></div></div></article><article id="Permission.Test.prototype.call" data-title="Permission.Test#call (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Permission" class="" title="Permission (class)" data-id="Permission">Permission</a></li><li><a href="#Permission.Test" class="" title="Permission.Test (class)" data-id="Permission.Test">Test</a></li><li><a href="#Permission.Test.prototype.call" class="" title="Permission.Test#call (instance method)" data-id="Permission.Test#call">call</a></li></ul><h2><span class="type">instance method</span><span class="name">Permission.Test#call</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/permission/test.js#L157">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Permission.Test#call(env, callback)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Void</li></ul></li></ul></li></ul><ul class="argument-list"><li class="argument"><ul class="argument-details"><li class="argument-name">env</li><li class="argument-types"><ul><li class="argument-type">Object</li></ul></li><li class="argument-description"><p>Context of tests execution</p></li></ul></li><li class="argument"><ul class="argument-details"><li class="argument-name">callback</li><li class="argument-types"><ul><li class="argument-type">Function</li></ul></li><li class="argument-description"><p>Fired after all tests finished with <code>(err, result)</code>, where <code>err</code> is an error if any, null otherwise and <code>result</code> is boolean.</p></li></ul></li></ul><p><strong> NOTICE </strong>
This method was named <code>call</code> <em>specially</em> to blur differences between
functions and Test instance, it can be <em>executed</em> same way. And when all
attached test handlers (via Test#and | Test#or) are being processed,
there would be no need in special checking if object is a function or not.
So any object with <code>call</code> property can be used as test handler in fact.</p>  <p>Runs all tests and fires callback.</p></div></div></article><article id="Permission.Test.prototype.or" data-title="Permission.Test#or (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Permission" class="" title="Permission (class)" data-id="Permission">Permission</a></li><li><a href="#Permission.Test" class="" title="Permission.Test (class)" data-id="Permission.Test">Test</a></li><li><a href="#Permission.Test.prototype.or" class="" title="Permission.Test#or (instance method)" data-id="Permission.Test#or">or</a></li></ul><h2><span class="type">instance method</span><span class="name">Permission.Test#or</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/permission/test.js#L135">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Permission.Test#or(test)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type"><a href="#Permission.Test" class="link-short" title="Permission.Test (class)" data-id="Permission.Test">Test</a></li></ul></li></ul></li></ul><ul class="argument-list"><li class="argument"><ul class="argument-details"><li class="argument-name">test</li><li class="argument-types"><ul><li class="argument-type">Function</li></ul></li><li class="argument-description"><p>Test handler.</p></li></ul></li></ul><p>Appends new stack of tests and adds <code>test</code> to it.</p>  <h5>See Also</h5> <ul><li><em>Test Handlers</em> section of <a href="#Permission.Test" class="link-short" title="Permission.Test (class)" data-id="Permission.Test">Permission.Test</a></li></ul></div></div></article><article id="Permission.prototype.addTest" data-title="Permission#addTest (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Permission" class="" title="Permission (class)" data-id="Permission">Permission</a></li><li><a href="#Permission.prototype.addTest" class="" title="Permission#addTest (instance method)" data-id="Permission#addTest">addTest</a></li></ul><h2><span class="type">instance method</span><span class="name">Permission#addTest</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/permission.js#L294">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Permission#addTest(operation, condition[, onFail])</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type"><a href="#Permission" class="link-short" title="Permission (class)" data-id="Permission">Permission</a></li></ul></li></ul></li></ul><ul class="argument-list"><li class="argument"><ul class="argument-details"><li class="argument-name">condition</li><li class="argument-types"><ul><li class="argument-type">String</li><li class="argument-type">Function</li></ul></li></ul></li><li class="argument"><ul class="argument-details"><li class="argument-name">onFail</li><li class="argument-types"><ul><li class="argument-type">Object</li></ul></li><li class="argument-description"><p>See <a href="#Permission" class="link-short" title="Permission (class)" data-id="Permission">Permission</a> constructor for detailed info</p></li></ul></li></ul><p>Adds test with given <code>operation</code>. You can override message and/or handler of
the generic <code>onFail</code> (given in the constructor).</p>  <p><strong> NOTICE </strong>
<code>onFail</code> will be <em>ignored</em> when <code>operation</code> is <code>OR</code>.</p>  <h5>When <code>condition</code> is a Function</h5> <p>Instance of <a href="#Permission.Test" class="link-short" title="Permission.Test (class)" data-id="Permission.Test">Permission.Test</a> will be created with this function.</p>  <h5>When <code>condition</code> is a String</h5> <p>Will parse given string and create <a href="#Permission.Test" class="link-short" title="Permission.Test (class)" data-id="Permission.Test">Permission.Test</a> instance filled with
tests of given settings. You can use <code>AND</code> or <code>&amp;&amp;</code> and <code>OR</code> or <code>||</code> for
alternatives. You can use <code>NOT</code> for negative test. You can use <code>()</code> brackets
for grouping tests.</p>  <pre><code>is_translator_moderator OR ( can_propose_translation AND NOT banned )

</code></pre> <h5>See Also</h5> <ul><li><a href="#Permission.Test" class="link-short" title="Permission.Test (class)" data-id="Permission.Test">Permission.Test</a></li></ul></div></div></article><article id="Permission.prototype.or" data-title="Permission#or (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Permission" class="" title="Permission (class)" data-id="Permission">Permission</a></li><li><a href="#Permission.prototype.or" class="" title="Permission#or (instance method)" data-id="Permission#or">or</a></li></ul><h2><span class="type">instance method</span><span class="name">Permission#or</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/permission.js#L331">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Permission#or(condition)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type"><a href="#Permission" class="link-short" title="Permission (class)" data-id="Permission">Permission</a></li></ul></li></ul></li></ul><p>Syntax sugar. Shortcut for <code>test(&apos;OR&apos;, condition, null)</code>.</p>  <h5>See Also</h5> <ul><li><a href="#Permission.prototype.addTest" class="link-short" title="Permission#addTest (instance method)" data-id="Permission#addTest">Permission#addTest</a></li></ul></div></div></article><article id="Permission.prototype.test" data-title="Permission#test (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Permission" class="" title="Permission (class)" data-id="Permission">Permission</a></li><li><a href="#Permission.prototype.test" class="" title="Permission#test (instance method)" data-id="Permission#test">test</a></li></ul><h2><span class="type">instance method</span><span class="name">Permission#test</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/permission.js#L316">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Permission#test(condition, onFail)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type"><a href="#Permission" class="link-short" title="Permission (class)" data-id="Permission">Permission</a></li></ul></li></ul></li><li class="signature"><ul><li class="signature-call">Permission#test(condition, onFail)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type"><a href="#Permission" class="link-short" title="Permission (class)" data-id="Permission">Permission</a></li></ul></li></ul></li></ul><p>Syntax sugar. Shortcut for <code>test(&apos;AND&apos;, condition, onFail)</code>.</p>  <h5>See Also</h5> <ul><li><a href="#Permission.prototype.addTest" class="link-short" title="Permission#addTest (instance method)" data-id="Permission#addTest">Permission#addTest</a></li></ul></div></div></article><article id="Permission.prototype.filter" data-title="Permission#filter (instance property)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Permission" class="" title="Permission (class)" data-id="Permission">Permission</a></li><li><a href="#Permission.prototype.filter" class="" title="Permission#filter (instance property)" data-id="Permission#filter">filter</a></li></ul><h2><span class="type">instance property</span><span class="name">Permission#filter</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/permission.js#L225">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Permission#filter</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Function</li></ul></li></ul></li></ul><p>Handler, suitable to be used as before filter of the controller.
Will run all attached tests and will either deny action or will
pass execution to next filter/action.</p>  <h5>See Also</h5> <ul><li><a href="#Permission.prototype.test" class="link-short" title="Permission#test (instance method)" data-id="Permission#test">Permission#test</a></li></ul></div></div></article><article id="PriorityStack" data-title="PriorityStack (class)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#PriorityStack" class="" title="PriorityStack (class)" data-id="PriorityStack">PriorityStack</a></li></ul><h2><span class="type">class</span><span class="name">PriorityStack</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/priority_stack.js#L15">View source code</a></div></header><div class="section description"><h3>Description</h3><div class="content"><p>Provides easy way to build sequences of objects (or functions) based on
priority weight.</p>  <h5>Example</h5> <pre><code>var stack = new PriorityStack();

stack.push(20, &apos;World!&apos;).push(10, &apos;Hello&apos;);
stack.flatten().join(&apos; &apos;);
// -&gt; Hello World!</code></pre></div></div><div class="section constructor"><h3>Constructor</h3><div class="content"></div><ul class="method-list"><li><a href="#PriorityStack.new" class="" title="new PriorityStack (constructor)" data-id="new PriorityStack">new PriorityStack</a></li></ul></div><div class="section instance_methods"><h3>Instance methods</h3><div class="content"><ul class="method-list"><li><a href="#PriorityStack.prototype.flatten" class="" title="PriorityStack#flatten (instance method)" data-id="PriorityStack#flatten">flatten</a></li><li><a href="#PriorityStack.prototype.push" class="" title="PriorityStack#push (instance method)" data-id="PriorityStack#push">push</a></li></ul></div></div></article><article id="PriorityStack.new" data-title="new PriorityStack (constructor)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#PriorityStack" class="" title="PriorityStack (class)" data-id="PriorityStack">PriorityStack</a></li><li><a href="#PriorityStack.new" class="" title="new PriorityStack (constructor)" data-id="new PriorityStack">new</a></li></ul><h2><span class="type">constructor</span><span class="name">new PriorityStack</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/priority_stack.js#L31">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">new PriorityStack()</li></ul></li></ul><p>Can be called without <code>new</code> keyword.</p></div></div></article><article id="PriorityStack.prototype.flatten" data-title="PriorityStack#flatten (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#PriorityStack" class="" title="PriorityStack (class)" data-id="PriorityStack">PriorityStack</a></li><li><a href="#PriorityStack.prototype.flatten" class="" title="PriorityStack#flatten (instance method)" data-id="PriorityStack#flatten">flatten</a></li></ul><h2><span class="type">instance method</span><span class="name">PriorityStack#flatten</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/priority_stack.js#L73">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">PriorityStack#flatten()</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Array</li></ul></li></ul></li></ul><p>Returns resulting array of all elements from all sequences.</p>  <h5>Example</h5> <pre><code>stack.push(20, &apos;b&apos;).push(30, &apos;c&apos;).push(10, &apos;a&apos;);
stack.flatten().join(&apos;&apos;);
// -&gt; abc</code></pre></div></div></article><article id="PriorityStack.prototype.push" data-title="PriorityStack#push (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#PriorityStack" class="" title="PriorityStack (class)" data-id="PriorityStack">PriorityStack</a></li><li><a href="#PriorityStack.prototype.push" class="" title="PriorityStack#push (instance method)" data-id="PriorityStack#push">push</a></li></ul><h2><span class="type">instance method</span><span class="name">PriorityStack#push</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/priority_stack.js#L56">View source code</a></div></header><div class="section method chainable"><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">PriorityStack#push(priority, obj)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type"><a href="#PriorityStack" class="link-short" title="PriorityStack (class)" data-id="PriorityStack">PriorityStack</a></li></ul></li></ul></li></ul><ul class="argument-list"><li class="argument"><ul class="argument-details"><li class="argument-name">priority</li><li class="argument-types"><ul><li class="argument-type">Number</li></ul></li><li class="argument-description"><p>Priority of sequence</p></li></ul></li><li class="argument"><ul class="argument-details"><li class="argument-name">obj</li><li class="argument-types"><ul><li class="argument-type">Mixed</li></ul></li><li class="argument-description"><p>Something to be pushed into sequence</p></li></ul></li></ul><p>Appends <code>obj</code> into the end of sequence for given <code>priority</code>.</p></div></div></article><article id="Settings" data-title="Settings (class)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Settings" class="" title="Settings (class)" data-id="Settings">Settings</a></li></ul><h2><span class="type">class</span><span class="name">Settings</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/settings.js#L6">View source code</a></div></header><div class="section description"><h3>Description</h3><div class="content"><p>Provides class that reads and keeps info about all application settings</p></div></div><div class="section classes"><h3>Classes</h3><div class="content"><ul class="method-details-list"><li class="method-description"><h4><a href="#Settings.Store" class="" title="Settings.Store (class)" data-id="Settings.Store">Settings.Store</a></h4></li></ul></div></div><div class="section constructor"><h3>Constructor</h3><div class="content"></div><ul class="method-list"><li><a href="#Settings.new" class="" title="new Settings (constructor)" data-id="new Settings">new Settings</a></li></ul></div><div class="section instance_methods"><h3>Instance methods</h3><div class="content"><ul class="method-list"><li><a href="#Settings.prototype.definition" class="" title="Settings#definition (instance method)" data-id="Settings#definition">definition</a></li><li><a href="#Settings.prototype.get" class="" title="Settings#get (instance method)" data-id="Settings#get">get</a></li><li><a href="#Settings.prototype.store" class="" title="Settings#store (instance method)" data-id="Settings#store">store</a></li></ul></div></div></article><article id="Settings.new" data-title="new Settings (constructor)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Settings" class="" title="Settings (class)" data-id="Settings">Settings</a></li><li><a href="#Settings.new" class="" title="new Settings (constructor)" data-id="new Settings">new</a></li></ul><h2><span class="type">constructor</span><span class="name">new Settings</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/settings.js#L48">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">new Settings()</li></ul></li></ul></div></div></article><article id="Settings.Store" data-title="Settings.Store (class)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Settings" class="" title="Settings (class)" data-id="Settings">Settings</a></li><li><a href="#Settings.Store" class="" title="Settings.Store (class)" data-id="Settings.Store">Store</a></li></ul><h2><span class="type">class</span><span class="name">Settings.Store</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/settings/store.js#L4">View source code</a></div></header><div class="section constructor"><h3>Constructor</h3><div class="content"></div><ul class="method-list"><li><a href="#Settings.Store.new" class="" title="new Settings.Store (constructor)" data-id="new Settings.Store">new Settings.Store</a></li></ul></div><div class="section class_methods"><h3>Class methods</h3><div class="content"><ul class="method-list"><li><a href="#Settings.Store.adopts" class="" title="Settings.Store.adopts (class method)" data-id="Settings.Store.adopts">adopts</a></li></ul></div></div><div class="section instance_methods"><h3>Instance methods</h3><div class="content"><ul class="method-list"><li><a href="#Settings.Store.prototype.get" class="" title="Settings.Store#get (instance method)" data-id="Settings.Store#get">get</a></li><li><a href="#Settings.Store.prototype.getDefaultsFor" class="" title="Settings.Store#getDefaultsFor (instance method)" data-id="Settings.Store#getDefaultsFor">getDefaultsFor</a></li><li><a href="#Settings.Store.prototype.preload" class="" title="Settings.Store#preload (instance method)" data-id="Settings.Store#preload">preload</a></li><li><a href="#Settings.Store.prototype.set" class="" title="Settings.Store#set (instance method)" data-id="Settings.Store#set">set</a></li></ul></div></div><div class="section instance_properties"><h3>Instance properties</h3><div class="content"><ul class="method-list"><li><a href="#Settings.Store.prototype.keys" class="" title="Settings.Store#keys (instance property)" data-id="Settings.Store#keys">keys</a></li></ul></div></div></article><article id="Settings.Store.new" data-title="new Settings.Store (constructor)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Settings" class="" title="Settings (class)" data-id="Settings">Settings</a></li><li><a href="#Settings.Store" class="" title="Settings.Store (class)" data-id="Settings.Store">Store</a></li><li><a href="#Settings.Store.new" class="" title="new Settings.Store (constructor)" data-id="new Settings.Store">new</a></li></ul><h2><span class="type">constructor</span><span class="name">new Settings.Store</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/settings/store.js#L58">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">new Settings.Store()</li></ul></li></ul><p>Initiates store instance.</p>  <p>This is an abstract class. So you need to inherit it in order to make it
your store work. In your store you must define following functions within
<code>this.__</code> shared scope:</p>  <ul><li>preloader (Function): (optional) Backend of <a href="#Settings.Store.prototype.preload" class="link-short" title="Settings.Store#preload (instance method)" data-id="Settings.Store#preload">Settings.Store#preload</a>.
Must be a function with 2 arguments <code>(env, callback)</code> if given.</li><li>getter (Function): Backend of <a href="#Settings.Store.prototype.get" class="link-short" title="Settings.Store#get (instance method)" data-id="Settings.Store#get">Settings.Store#get</a>
Must be a function with 3 arguments <code>(keys, env, callback)</code></li><li>setter (Function): Backend of <a href="#Settings.Store.prototype.set" class="link-short" title="Settings.Store#set (instance method)" data-id="Settings.Store#set">Settings.Store#set</a>
Must be a function with 2 arguments <code>(data, env, callback)</code> </li></ul> <p>See corresponding public API methods <a href="#Settings.Store.prototype.preload" class="link-short" title="Settings.Store#preload (instance method)" data-id="Settings.Store#preload">Settings.Store#preload</a>,
<a href="#Settings.Store.prototype.get" class="link-short" title="Settings.Store#get (instance method)" data-id="Settings.Store#get">Settings.Store#get</a> and <a href="#Settings.Store.prototype.set" class="link-short" title="Settings.Store#set (instance method)" data-id="Settings.Store#set">Settings.Store#set</a> for informations about
<code>preloader</code>, <code>getter</code> and <code>setter</code>.</p>  <h5>Example</h5> <pre><code>var MyStore = function MyStore() {
  Settings.Store.call(this);
  // ...
  this.__.setter = funciton setter(data, env, callback) {
    // ...
  });
  // ...
};

Settings.Store.adopts(MyStore);

</code></pre> <h5>See Also</h5> <ul><li><a href="#Settings.prototype.store" class="link-short" title="Settings#store (instance method)" data-id="Settings#store">Settings#store</a></li><li><a href="#Settings.Store.adopts" class="link-short" title="Settings.Store.adopts (class method)" data-id="Settings.Store.adopts">Settings.Store.adopts</a></li></ul></div></div></article><article id="Settings.Store.adopts" data-title="Settings.Store.adopts (class method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Settings" class="" title="Settings (class)" data-id="Settings">Settings</a></li><li><a href="#Settings.Store" class="" title="Settings.Store (class)" data-id="Settings.Store">Store</a></li><li><a href="#Settings.Store.adopts" class="" title="Settings.Store.adopts (class method)" data-id="Settings.Store.adopts">adopts</a></li></ul><h2><span class="type">class method</span><span class="name">Settings.Store.adopts</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/settings/store.js#L310">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Settings.Store.adopts(child)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Store</li></ul></li></ul></li></ul><p>Returns adopted <code>child</code>. Wrapper over <code>util.inherit</code> that assigns <code>adopts</code>
method to the child class as well.</p>  <pre><code>Settings.Store.adopts(AppStore);
AppStore.adopts(MyStore);
</code></pre> <p>As <code>adopts</code> returns <code>child</code>, above can be written in one line:</p>  <pre><code>Settings.Store.adopts(AppStore).adopts(MyStore);</code></pre></div></div></article><article id="Settings.Store.prototype.get" data-title="Settings.Store#get (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Settings" class="" title="Settings (class)" data-id="Settings">Settings</a></li><li><a href="#Settings.Store" class="" title="Settings.Store (class)" data-id="Settings.Store">Store</a></li><li><a href="#Settings.Store.prototype.get" class="" title="Settings.Store#get (instance method)" data-id="Settings.Store#get">get</a></li></ul><h2><span class="type">instance method</span><span class="name">Settings.Store#get</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/settings/store.js#L131">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Settings.Store#get(key, env, callback)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Void</li></ul></li></ul></li><li class="signature"><ul><li class="signature-call">Settings.Store#get(key, callback)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Void</li></ul></li></ul></li></ul><ul class="argument-list"><li class="argument"><ul class="argument-details"><li class="argument-name">key</li><li class="argument-types"><ul><li class="argument-type">String</li><li class="argument-type">Array</li></ul></li></ul></li><li class="argument"><ul class="argument-details"><li class="argument-name">env</li><li class="argument-types"><ul><li class="argument-type">Object</li></ul></li><li class="argument-description"><p>(optional) Default: empty object.</p></li></ul></li><li class="argument"><ul class="argument-details"><li class="argument-name">callback</li><li class="argument-types"><ul><li class="argument-type">Function</li></ul></li></ul></li></ul><p>Calls underlying getter to get value of given key(s). For each key
underlying <code>getter</code> returns a <code>data</code> object that consist of:</p>  <ul><li>value (Mixed)</li><li>strict (Boolean) </li></ul> <h5>When <code>key</code> given as a String</h5> <p>Will fire <code>callback</code> with <code>data</code> object for given key only.</p>  <pre><code>store.get(&apos;foobar&apos;, function (err, data) {
  if (data.value &amp;&amp; data.strict) {
    // ...
  }
});

</code></pre> <h5>When <code>key</code> given as an Array</h5> <p>Will fire <code>callback</code> with hash of <code>key =&gt; data</code> pairs for the keys.</p>  <pre><code>store.get([&apos;foobar&apos;], function (err, data) {
  if (data.foobar.value &amp;&amp; data.foobar.strict) {
    // ...
  }
});

</code></pre> <h4>Underlying getter</h4> <p>Underlying getter (see <a href="#Settings.Store" class="link-short" title="Settings.Store (class)" data-id="Settings.Store">Settings.Store</a> constructor) must be a function
with signature:</p>  <pre><code>function getter(keys, env, callback);
</code></pre> <p>and should accept an array of <code>keys</code>, e.g. <code>[&apos;is_frst_gump&apos;, &apos;can_run&apos;]</code>,
<code>env</code> - an object preloaded by <a href="#Settings.Store.prototype.preload" class="link-short" title="Settings.Store#preload (instance method)" data-id="Settings.Store#preload">Settings.Store#preload</a> and a <code>callback</code>.</p>  <p>It should fire <code>callback</code> with arguments <code>err, data</code>, where <code>err</code> is an
error if any, and <code>data</code> is an object of <code>key =&gt; val</code> pairs and each
<code>val</code> is a structure with at least <code>value</code> field, e.g.:</p>  <pre><code>var getter = function (keys, env, callback) {
  var results = {};

  keys.forEach(function (k) {
    results[k] = {value: !!(Date.now()%2)};
  });

  callback(null, results);
};</code></pre></div></div></article><article id="Settings.Store.prototype.getDefaultsFor" data-title="Settings.Store#getDefaultsFor (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Settings" class="" title="Settings (class)" data-id="Settings">Settings</a></li><li><a href="#Settings.Store" class="" title="Settings.Store (class)" data-id="Settings.Store">Store</a></li><li><a href="#Settings.Store.prototype.getDefaultsFor" class="" title="Settings.Store#getDefaultsFor (instance method)" data-id="Settings.Store#getDefaultsFor">getDefaultsFor</a></li></ul><h2><span class="type">instance method</span><span class="name">Settings.Store#getDefaultsFor</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/settings/store.js#L294">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Settings.Store#getDefaultsFor(key)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Mixed</li></ul></li></ul></li></ul><p>Returns default value for given setting key.</p>  <p><strong> WARNING </strong>
This property is a placeholder only. When <code>store</code> is being added to the
<a href="#Settings" class="link-short" title="Settings (class)" data-id="Settings">Settings</a> manager it receives real function that returns values.</p></div></div></article><article id="Settings.Store.prototype.preload" data-title="Settings.Store#preload (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Settings" class="" title="Settings (class)" data-id="Settings">Settings</a></li><li><a href="#Settings.Store" class="" title="Settings.Store (class)" data-id="Settings.Store">Store</a></li><li><a href="#Settings.Store.prototype.preload" class="" title="Settings.Store#preload (instance method)" data-id="Settings.Store#preload">preload</a></li></ul><h2><span class="type">instance method</span><span class="name">Settings.Store#preload</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/settings/store.js#L258">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Settings.Store#preload(env, callback)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Void</li></ul></li></ul></li><li class="signature"><ul><li class="signature-call">Settings.Store#preload(callback)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Void</li></ul></li></ul></li></ul><ul class="argument-list"><li class="argument"><ul class="argument-details"><li class="argument-name">env</li><li class="argument-types"><ul><li class="argument-type">Object</li></ul></li><li class="argument-description"><p>(optional) Default: empty object.</p></li></ul></li><li class="argument"><ul class="argument-details"><li class="argument-name">callback</li><li class="argument-types"><ul><li class="argument-type">Function</li></ul></li></ul></li></ul><p>Calls underlying <code>preloader</code> for <code>env</code> if it was not preloaded before.</p>  <h4>Underlying preloader</h4> <p>Underlying preloader (see <a href="#Settings.Store" class="link-short" title="Settings.Store (class)" data-id="Settings.Store">Settings.Store</a> constructor) must be a function
with signature:</p>  <pre><code>function preloader(env, callback);
</code></pre> <p>This method is being called once for each <code>env</code> before execution of <code>get</code> or
<code>set</code> methods and prepares <code>env</code> to be used by underlying <code>getter</code> and
<code>setter</code>.</p></div></div></article><article id="Settings.Store.prototype.set" data-title="Settings.Store#set (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Settings" class="" title="Settings (class)" data-id="Settings">Settings</a></li><li><a href="#Settings.Store" class="" title="Settings.Store (class)" data-id="Settings.Store">Store</a></li><li><a href="#Settings.Store.prototype.set" class="" title="Settings.Store#set (instance method)" data-id="Settings.Store#set">set</a></li></ul><h2><span class="type">instance method</span><span class="name">Settings.Store#set</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/settings/store.js#L219">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Settings.Store#set(data, env, callback)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Void</li></ul></li></ul></li><li class="signature"><ul><li class="signature-call">Settings.Store#set(data, callback)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Void</li></ul></li></ul></li></ul><ul class="argument-list"><li class="argument"><ul class="argument-details"><li class="argument-name">data</li><li class="argument-types"><ul><li class="argument-type">Object</li></ul></li><li class="argument-description"><p>key-value pairs to be set</p></li></ul></li><li class="argument"><ul class="argument-details"><li class="argument-name">env</li><li class="argument-types"><ul><li class="argument-type">Object</li></ul></li><li class="argument-description"><p>(optional) Default: empty object.</p></li></ul></li><li class="argument"><ul class="argument-details"><li class="argument-name">callback</li><li class="argument-types"><ul><li class="argument-type">Function</li></ul></li></ul></li></ul><p>Calls underlying setter to set values according to the given <code>data</code> map.
Each key of <code>data</code> is a setting name (key) and value is an object with
fields:</p>  <ul><li>value (Mixed)</li><li>strict (Boolean) </li></ul> <h5>Example</h5> <pre><code>var data =
store.set({foobar: {value: true, strict:false}}, function (err) {
  if (err) {
    // ...
  }
});

</code></pre> <h4>Underlying setter</h4> <p>Underlying setter (see <a href="#Settings.Store" class="link-short" title="Settings.Store (class)" data-id="Settings.Store">Settings.Store</a> constructor) must be a function
with signature:</p>  <pre><code>function setter(data, env, callback);
</code></pre> <p>and should accept an hash with <code>data</code>, e.g.
<code>{is_frst_gump: true, can_run: true}</code>, <code>env</code> - an object preloaded
by <a href="#Settings.Store.prototype.preload" class="link-short" title="Settings.Store#preload (instance method)" data-id="Settings.Store#preload">Settings.Store#preload</a> and a <code>callback</code>.</p>  <p>It should fire <code>callback</code> with only one argument <code>err</code>, where <code>err</code> is an
error if any, e.g.:</p>  <pre><code>var setter = function (data, env, callback) {
  callback(Error(&quot;Not implemented yet&quot;);
};</code></pre></div></div></article><article id="Settings.Store.prototype.keys" data-title="Settings.Store#keys (instance property)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Settings" class="" title="Settings (class)" data-id="Settings">Settings</a></li><li><a href="#Settings.Store" class="" title="Settings.Store (class)" data-id="Settings.Store">Store</a></li><li><a href="#Settings.Store.prototype.keys" class="" title="Settings.Store#keys (instance property)" data-id="Settings.Store#keys">keys</a></li></ul><h2><span class="type">instance property</span><span class="name">Settings.Store#keys</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/settings/store.js#L282">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Settings.Store#keys</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Array</li></ul></li></ul></li></ul><p>Array of all settign keys, the store knows about.</p>  <p><strong> WARNING </strong>
This property is a placeholder only. When <code>store</code> is being added to the
<a href="#Settings" class="link-short" title="Settings (class)" data-id="Settings">Settings</a> manager it receives real <code>keys</code> getter.</p></div></div></article><article id="Settings.prototype.definition" data-title="Settings#definition (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Settings" class="" title="Settings (class)" data-id="Settings">Settings</a></li><li><a href="#Settings.prototype.definition" class="" title="Settings#definition (instance method)" data-id="Settings#definition">definition</a></li></ul><h2><span class="type">instance method</span><span class="name">Settings#definition</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/settings.js#L250">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Settings#definition(store, key[, options])</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Object</li></ul></li></ul></li></ul><p>When <code>options</code> given, adds definition of the setting <code>key</code> under <code>store</code>
name. Otherwise returns previously added <code>options</code> of the <code>key</code>.</p>  <h5>Throws Error</h5> <ul><li>When definition with <code>name</code> not found.</li><li>When adding definition with duplicate name</li></ul></div></div></article><article id="Settings.prototype.get" data-title="Settings#get (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Settings" class="" title="Settings (class)" data-id="Settings">Settings</a></li><li><a href="#Settings.prototype.get" class="" title="Settings#get (instance method)" data-id="Settings#get">get</a></li></ul><h2><span class="type">instance method</span><span class="name">Settings#get</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/settings.js#L145">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Settings#get(key, env, callback)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">Void</li></ul></li></ul></li></ul><p>Finds given key in all available stores and fires <code>callback(err, val)</code>
with aggregated (combined from different stores) value.</p>  <h5>Aggregated Value Calculation</h5> <p>Result depends on aggregation rules (OR/AND). We don&apos;t use scopes.
OR rules are calculated first, then AND rules applied over.</p>  <p>AND values - are those flagged as <code>strict</code> (or <code>restrictive</code>).</p></div></div></article><article id="Settings.prototype.store" data-title="Settings#store (instance method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Settings" class="" title="Settings (class)" data-id="Settings">Settings</a></li><li><a href="#Settings.prototype.store" class="" title="Settings#store (instance method)" data-id="Settings#store">store</a></li></ul><h2><span class="type">instance method</span><span class="name">Settings#store</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/settings.js#L209">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Settings#store(name[, store])</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type"><a href="#Settings.Store" class="link-short" title="Settings.Store (class)" data-id="Settings.Store">Store</a></li></ul></li></ul></li></ul><ul class="argument-list"><li class="argument"><ul class="argument-details"><li class="argument-name">store</li><li class="argument-types"><ul><li class="argument-type">Settings.Store</li></ul></li></ul></li></ul><p>When <code>store</code> given adds it and returns back.
Otherwise returns previously added store.</p>  <h5>Throws Error</h5> <ul><li>When store with <code>name</code> not found.</li><li>When adding store with duplicate name </li></ul> <h5>See Also</h5> <ul><li><a href="#Settings.Store" class="link-short" title="Settings.Store (class)" data-id="Settings.Store">Settings.Store</a> constructor for <code>options</code> description</li></ul></div></div></article><article id="Utilities" data-title="Utilities (class)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Utilities" class="" title="Utilities (class)" data-id="Utilities">Utilities</a></li></ul><h2><span class="type">class</span><span class="name">Utilities</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/utilities.js#L6">View source code</a></div></header><div class="section description"><h3>Description</h3><div class="content"><p>Collection of helper functions used by nodeca-lib and apps.</p></div></div><div class="section class_methods"><h3>Class methods</h3><div class="content"><ul class="method-list"><li><a href="#Utilities.readYaml" class="" title="Utilities.readYaml (class method)" data-id="Utilities.readYaml">readYaml</a></li></ul></div></div></article><article id="Utilities.readYaml" data-title="Utilities.readYaml (class method)" class="article "><header><ul class="breadcrumbs"><li><a href="#home">Home</a></li><li><a href="#Utilities" class="" title="Utilities (class)" data-id="Utilities">Utilities</a></li><li><a href="#Utilities.readYaml" class="" title="Utilities.readYaml (class method)" data-id="Utilities.readYaml">readYaml</a></li></ul><h2><span class="type">class method</span><span class="name">Utilities.readYaml</span></h2><div class="source"><a href="https:/github.com/nodeca/nodeca-lib/lib/nodeca-lib/utilities.js#L32">View source code</a></div></header><div class="section method "><div class="content"><ul class="signatures"><li class="signature"><ul><li class="signature-call">Utilities.readYaml(file, callback)</li><li class="signature-returns"><ul class="argument-types"><li class="argument-type">void</li></ul></li></ul></li></ul><p>Reads and parses given file as YAML.
Fires <code>callback(err, obj)</code> when finished.</p>  <p><strong>NOTICE</strong> File should be UTF-8 encoded.</p></div></div></article><footer class="footer"><p>Last updated on Fri, 09 Dec 2011 13:38:14 GMT. Generated by <a href="http://github.com/nodeca/ndoc">ndoc</a></p></footer></article><script src="javascripts/jquery.js"></script><!-- scripts concatenated and minified via ant build script--><script defer src="javascripts/plugins.js"></script>
<script defer src="javascripts/prettify.js"></script>
<script defer src="javascripts/script.js"></script>
<!-- end scripts--><!--[if lt IE 7]><script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script><script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})
</script><![endif]--></body>